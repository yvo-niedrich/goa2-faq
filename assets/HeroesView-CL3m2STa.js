import{d as $,u as T,c as v,a as r,b as y,e as U,w as N,r as V,o as t,f as D,s as R,g as q,h as z,i as M,j as P,k as B,l as E,m as G,n as J,p as x,q as f,t as K,v as F,F as O,x as w,y as H,z as Q,A as W,T as X}from"./index-DAn_MFQD.js";import{_ as Y,a as j,S as Z,H as S}from"./CardColorColumns.vue_vue_type_style_index_0_lang-DV5ryoXU.js";const ee={key:0,class:"spellbook-container"},oe=$({__name:"HeroOverview",props:{hero:{}},setup(k){const i=k,a=T(),l=v(()=>a.id===i.hero.id);function c(u){a.reset(),a.id=u.id,V.push({name:"player"})}function m(){a.reset()}const g=v(()=>i.hero.cards),h=v(()=>i.hero.spellbook);return(u,_)=>(t(),r("div",null,[y(Y,{hero:u.hero},{actions:N(()=>[l.value?(t(),r("div",{key:0,class:"btn-favorite active",onClick:m},"♥")):(t(),r("div",{key:1,class:"btn-favorite inactive",onClick:_[0]||(_[0]=()=>c(u.hero))},"♥"))]),_:1},8,["hero"]),y(j,{cards:g.value},null,8,["cards"]),h.value&&h.value.length?(t(),r("div",ee,[y(j,{cards:h.value},null,8,["cards"])])):U("",!0)]))}}),se={class:"search-bar"},te={key:0,class:"list"},re={key:1,class:"groups"},ne={class:"group-title"},ae={class:"list"},le=$({__name:"HeroSelection",props:{onClick:{type:Function},scale:{}},setup(k){const{t:i}=D(),a={box:{label:"app.sortby.box",sortOrder:[J,E,B],groupBy:e=>e.expansion,groupOrder:G},complexity:{label:"app.sortby.complexity",sortOrder:[E,B],groupBy:e=>`${"★".repeat(e.complexity)}`,groupOrder:(e,s)=>e.length-s.length},name:{label:"app.sortby.name",sortOrder:[B],groupBy:null,groupOrder:null}},{filteredExpansions:l,selectionLayout:c}=R(q()),{isTablet:m,isDesktop:g}=z(),h=v(()=>g.value?250:m.value?200:150),u=M("");function _(e){return(s,o)=>e.reduce((n,p)=>n||p(s,o),0)}function A(e,s){return s?e.sort(s):e}const b=v(()=>{const e=Object.values(P).filter(d=>l.value.length===0||l.value.includes(d.expansion)).filter(d=>d.name.toLowerCase().includes(u.value.toLowerCase())),{sortOrder:s,groupBy:o}=a[c.value],n=_(s);if(!o)return e.sort(n);const p={};return e.forEach(d=>{const C=o(d);p.hasOwnProperty(C)||(p[C]=[]),p[C].push(d)}),Object.keys(p).forEach(d=>p[d].sort(n)),p});function I(e,s){return Object.keys(e).reduce(function(o,n){return o[n]=s(e[n]),o},{})}const L=v(()=>I(a,e=>i(e.label)));return(e,s)=>(t(),r("div",null,[x("div",se,[y(Z,{name:u.value,"onUpdate:name":s[0]||(s[0]=o=>u.value=o),choices:f(l),"onUpdate:choices":s[1]||(s[1]=o=>F(l)?l.value=o:null),sortBy:f(c),"onUpdate:sortBy":s[2]||(s[2]=o=>F(c)?c.value=o:null),options:f(K),sortByOptions:L.value,placeholder:e.$t("app.button.search")},null,8,["name","choices","sortBy","options","sortByOptions","placeholder"])]),Array.isArray(b.value)?(t(),r("div",te,[(t(!0),r(O,null,w(b.value,o=>(t(),H(S,{key:o.id,height:h.value*(e.scale||1),name:o.name,path:o.icon,complexity:o.complexity,onClick:()=>e.onClick?e.onClick(o):!1},null,8,["height","name","path","complexity","onClick"]))),128))])):(t(),r("div",re,[(t(!0),r(O,null,w(A(Object.keys(b.value),a[f(c)].groupOrder),o=>(t(),r("div",{key:o,class:"group"},[x("h2",ne,Q(o),1),x("div",ae,[(t(!0),r(O,null,w(b.value[o],n=>(t(),H(S,{key:n.id,height:h.value*(e.scale||1),name:n.name,path:n.icon,complexity:n.complexity,onClick:()=>e.onClick?e.onClick(n):!1},null,8,["height","name","path","complexity","onClick"]))),128))])]))),128))]))]))}}),ie={class:"hero-overview"},ce={key:0,class:"overview-selection"},ue={key:1,class:"overview-details"},ve=$({__name:"HeroesView",props:{hero:{}},setup(k){const i=k,a=v(()=>{if(!i.hero)return null;try{return W(i.hero)}catch(l){return console.warn(l),null}});return(l,c)=>(t(),r("div",ie,[y(X,{name:"slide-"+(a.value?"left":"right")},{default:N(()=>[a.value?(t(),r("div",ue,[y(oe,{hero:a.value},null,8,["hero"])])):(t(),r("div",ce,[y(le,{onClick:m=>f(V).push({name:"heroes",params:{hero:m.id}})},null,8,["onClick"])]))]),_:1},8,["name"])]))}});export{ve as default};
